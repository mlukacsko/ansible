---
 - hosts: localhost
   gather_facts: no
   module_defaults:
     group/aws:
       region: "us-east-2"
   tasks:
     - name: create iam user
       iam_user:
         name: m5admin
         state: present
     - name: create iam group
       iam_group: 
         name: m5administrator
         managed_policy:
           - arn:aws:iam::aws:policy/AdministratorAccess
         users:
           - m5admin
         state: present
     - name: create lauch template
       ec2_launch_template:
         name: m5_launch_template
         image_id: ami-026dea5602e368e96
         key_name: AuburnKeyPair
         instance_type: t2.micro
         tags: m5-asg-server
         associate_public_ip_address: yes
         security_groups:
           - Module5-developer-sg
         iam_instance_profile: 
         state: present
