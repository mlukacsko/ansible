---
 - hosts: localhost
   gather_facts: no
   module_defaults:
     group/aws:
       region: "us-east-2"
   tasks:
    - name: create load balancer
      elb_network_lb:
        name: m5-nlb
        type: network
        scheme: internet-facing
        vpc_id: "{{ vpc.vpc.id }}"
        subnets:
          - "{{ public_subnet.subnet.id }}"
        listeners:
          - Protocol: TCP
            Port: 80
          - Protocol: TLS
            Port: 443
            DefaultActions:
              - Type: forward
          - certificates:
            certificate_arn: arn:aws:elasticloadbalancing:us-east-2:800575888137:targetgroup/demo-tg/90065fbb52888ce4
        state: present
  #  - name: create auto scaling group
   #   ec2_asg:
        

